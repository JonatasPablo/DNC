// =========================================================================================
// üîπ IMPORTA√á√ÉO DOS HOOKS ESSENCIAIS DO REACT üîπ
// =========================================================================================

/**
 * useState:
 * - Permite criar um **estado** dentro do componente funcional.
 * - Armazena informa√ß√µes que podem **mudar ao longo do tempo** (exemplo: lista de projetos).
 * 
 * useEffect:
 * - Permite realizar **efeitos colaterais** dentro do componente.
 * - Exemplo de efeitos colaterais: buscar dados de uma API, manipular o DOM, configurar um listener.
 */
import { useState, useEffect } from 'react';

// =========================================================================================
// üîπ IMPORTA√á√ÉO DO ARQUIVO CSS üîπ
// =========================================================================================

/**
 * Aqui importamos o arquivo de estilos espec√≠ficos para este componente.
 * O CSS garante que o layout, cores, espa√ßamento e tipografia estejam de acordo com o design.
 */
import './ProjectsList.css';

// =========================================================================================
// üîπ IMPORTA√á√ÉO DE ASSETS (IMAGENS DE √çCONES) üîπ
// =========================================================================================

/**
 * Aqui importamos imagens que servem como √≠cones no projeto.
 * - `LikedFilled`: representa o √≠cone preenchido de "curtida" (exemplo: quando o usu√°rio curtiu algo).
 * - `Liked`: representa o √≠cone vazio de "curtida" (n√£o utilizado neste momento, mas poderia ser para alternar estados).
 */
import LikedFilled from '../../assets/like-filled.svg';
import Liked from '../../assets/like.svg';

// =========================================================================================
// üîπ IMPORTA√á√ÉO DA FUN√á√ÉO DE SERVI√áO QUE BUSCA DADOS DA API üîπ
// =========================================================================================

/**
 * Importa a fun√ß√£o `getApiData`, respons√°vel por buscar dados em uma API externa.
 * - O `getApiData` centraliza a l√≥gica de chamadas HTTP para evitar repeti√ß√£o de c√≥digo.
 * - Torna o c√≥digo mais organizado e f√°cil de manter.
 */
import { getApiData } from '../../services/apiServices';

// =========================================================================================
// üîπ DEFINI√á√ÉO DO COMPONENTE FUNCIONAL: `ProjectsList` üîπ
// =========================================================================================

/**
 * O componente `ProjectsList` tem como fun√ß√£o exibir uma **lista de projetos**.
 * 
 * Componentes funcionais:
 * - S√£o declarados como **fun√ß√µes JavaScript**.
 * - No React, um componente sempre **come√ßa com letra mai√∫scula** (ProjectsList).
 * - Retornam **JSX**, que descreve a interface visual no navegador.
 */
function ProjectsList() {

    // =====================================================================================
    // üîπ DECLARA√á√ÉO DO ESTADO: LISTA DE PROJETOS üîπ
    // =====================================================================================

    /**
     * useState([]):
     * - Cria um estado chamado `projects` que come√ßa com um array vazio `[]`.
     * - O estado `projects` vai armazenar os dados retornados pela API.
     * 
     * setProjects:
     * - Fun√ß√£o que atualiza o estado `projects`.
     */
    const [projects, setProjects] = useState([]);

    // =====================================================================================
    // üîπ EFEITO COLATERAL: BUSCAR DADOS DA API AO CARREGAR A P√ÅGINA üîπ
    // =====================================================================================

    /**
     * useEffect(() => {...}, []);
     * - Executa a fun√ß√£o de efeito colateral quando o componente **monta pela primeira vez**.
     * - O array de depend√™ncias `[]` garante que isso acontece **apenas uma vez** (componentDidMount).
     */
    useEffect(() => {

        // =================================================================================
        // üî∏ DECLARA√á√ÉO DA FUN√á√ÉO ASS√çNCRONA fetchData üî∏
        // =================================================================================

        /**
         * Uma fun√ß√£o ass√≠ncrona que:
         * - Faz uma chamada HTTP para a API.
         * - Aguarda a resposta.
         * - Atualiza o estado com os dados recebidos.
         */
        const fetchData = async () => {
            try {
                /**
                 * getApiData('projects'):
                 * - Faz uma requisi√ß√£o GET para o endpoint 'projects'.
                 * - Aguarda o retorno com a palavra-chave `await`.
                 */
                const projectsResponse = await getApiData('projects');

                /**
                 * Atualiza o estado `projects` com os dados recebidos da API.
                 * Isso automaticamente **re-renderiza** o componente exibindo os novos dados.
                 */
                setProjects(projectsResponse);

            } catch {
                /**
                 * Se ocorrer algum erro (exemplo: API indispon√≠vel), define a lista como vazia.
                 * Em um projeto real, voc√™ pode mostrar um alerta ou mensagem de erro para o usu√°rio.
                 */
                setProjects([]);
            }
        };

        // =================================================================================
        // üî∏ EXECUTA A FUN√á√ÉO fetchData üî∏
        // =================================================================================

        /**
         * Chamamos `fetchData` para iniciar a busca de dados assim que o componente √© montado.
         */
        fetchData();

    }, []); // Depend√™ncia vazia = executa apenas uma vez no ciclo de vida do componente.

    // =====================================================================================
    // üîπ RENDERIZA√á√ÉO DO COMPONENTE üîπ
    // =====================================================================================

    /**
     * O JSX abaixo descreve como o componente ser√° renderizado na interface.
     */
    return (
        // Container principal do componente, estilizado pela classe CSS 'projects-section'.
        <div className='projects-section'>

            {/* ================================================================================= */}
            {/* üî∏ SE√á√ÉO DO CABE√áALHO (T√çTULO E DESCRI√á√ÉO) üî∏ */}
            {/* ================================================================================= */}

            <div className='projects-hero'>
                <h2>Follow Our Projects</h2>
                <p>
                    It is a long established fact that a reader will be distracted by the 
                    of readable content of page lookings at its layouts points.
                </p>
            </div>

            {/* ================================================================================= */}
            {/* üî∏ GRID DOS PROJETOS üî∏ */}
            {/* ================================================================================= */}

            <div className='projects-grid'>
                {
                    /**
                     * Iteramos sobre a lista de `projects` com o m√©todo `map()`.
                     * Para cada item no array, retornamos um card com suas informa√ß√µes.
                     * 
                     * O `project` representa um √∫nico item no array `projects`.
                     */
                    projects ?
                        projects.map((project) => (

                            /**
                            * Cada elemento da lista deve ter uma `key` √∫nica para o React identificar e otimizar  renderiza√ß√µes.
                            * Aqui usamos `project.id` como `key`.
                            */
                            <div 
                                className='project-card d-flex jc-center al-center fd-column' 
                                key={project.id}
                            >

                                {/* ================================================================================= */}
                                {/* üî∏ IMAGEM DO PROJETO üî∏ */}
                                {/* ================================================================================= */}

                                <div 
                                    className='thumb tertiary-background'
                                    style={{ backgroundImage: `url(${project.thumb})` }}
                                    /**
                                    * Define dinamicamente a imagem de fundo com o link de `project.thumb`.
                                     */
                                ></div>

                                {/* ================================================================================= */}
                                {/* üî∏ T√çTULO DO PROJETO üî∏ */}
                                {/* ================================================================================= */}

                                <h3>{project.title}</h3>

                                {/* ================================================================================= */}
                                {/* üî∏ SUBT√çTULO OU DESCRI√á√ÉO CURTA üî∏ */}
                                {/* ================================================================================= */}

                                <p>{project.subtitle}</p>

                                {/* ================================================================================= */}
                                {/* üî∏ √çCONE DE CURTIDA üî∏ */}
                                {/* ================================================================================= */}

                                <img 
                                    src={LikedFilled}    // Exibe o √≠cone de "curtido" (poderia trocar dinamicamente para Liked)
                                    height='20px'        // Altura do √≠cone
                                    alt="Liked"          // Descri√ß√£o para acessibilidade (SEO e leitores de tela)
                                />

                            </div>
                        ))
                    : null
                }
            </div>
        </div>
    );
}

// =========================================================================================
// üîπ EXPORTA√á√ÉO DO COMPONENTE üîπ
// =========================================================================================

/**
 * `export default` permite que `ProjectsList` seja importado e usado em qualquer lugar do projeto.
 * Exemplo:
 * import ProjectsList from './components/ProjectsList/ProjectsList';
 */
export default ProjectsList;
